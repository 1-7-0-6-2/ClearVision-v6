/* HEADER BAR */
%base {
	%headerBar {
		height: 48px;
		background: rgba(0, 0, 0, calc(#{map-get($bg, shading)} * .6));
		box-shadow: 0 0 10px rgba(0, 0, 0, calc(#{map-get($bg, shading)} * .6));
		color: hsla(0, 0%, 100%, .5);
	}
}
%headerBar {
	%headerBarChildren {
		-webkit-mask: linear-gradient(to left, transparent, #000 20px);
		mask: linear-gradient(to left, transparent, #000 20px);
		&:after {
			display: none;
		}
		%headerBarIcon {
			width: 20px;
			color: $main-color;
			filter: drop-shadow(0 0 3px);
			&[name=Nova_At] {
				> path {
					d: path("M15.45,11.91C15.34,9.7 13.7,8.37 11.72,8.37H11.64C9.35,8.37 8.09,10.17 8.09,12.21C8.09,14.5 9.62,15.95 11.63,15.95C13.88,15.95 15.35,14.3 15.46,12.36M11.65,6.39C13.18,6.39 14.62,7.07 15.67,8.13V8.13C15.67,7.62 16,7.24 16.5,7.24H16.61C17.35,7.24 17.5,7.94 17.5,8.16V16.06C17.46,16.58 18.04,16.84 18.37,16.5C19.64,15.21 21.15,9.81 17.58,6.69C14.25,3.77 9.78,4.25 7.4,5.89C4.88,7.63 3.26,11.5 4.83,15.11C6.54,19.06 11.44,20.24 14.35,19.06C15.83,18.47 16.5,20.46 15,21.11C12.66,22.1 6.23,22 3.22,16.79C1.19,13.27 1.29,7.08 6.68,3.87C10.81,1.42 16.24,2.1 19.5,5.5C22.95,9.1 22.75,15.8 19.4,18.41C17.89,19.59 15.64,18.44 15.66,16.71L15.64,16.15C14.59,17.2 13.18,17.81 11.65,17.81C8.63,17.81 6,15.15 6,12.13C6,9.08 8.63,6.39 11.65,6.39Z");
				}
			}
		}
	}
	%headerBarTitle {
		margin-left: 5px;
		color: #fff;
		text-shadow: 0 0 3px #000;
		&%headerBarTitleMuted {
			color: hsla(0, 0%, 100%, .3);
			text-shadow: none;
		}
	}
	%headerBarTopic {
		color: hsla(0, 0%, 100%, .5);
		> %anchor {
			color: $main-color;
			@include hover-shadow;
		}
	}
	%headerBarDivider {
		background: hsla(0, 0%, 100%, .1);
	}
}
%headerBarIconWrapper {
	margin: 0 1px;
	padding: 2px 3px;
	box-sizing: content-box;
}
%chat {
	%headerBarTitle {
		margin-left: 0;
	}
}

// TOOLBAR
%toolbar {
	%headerBarIconWrapper {
		border-radius: 3px;
		transition: all .3s ease-in-out;
		%headerBarIcon {
			opacity: .5;
			transition: all .15s ease-in-out;
		}

		// SELECTED & POPOUT OPEN
		&%headerBarIconSelected,
		&%headerBarIconPopoutOpen {
			background: hsla(0, 0%, 100%, .1);
			%headerBarIcon {
				opacity: .7;
			}
		}

		// HOVER
		&%headerBarIconClickable:hover {
			%headerBarIcon {
				opacity: 1;
			}
		}

		// UNREAD
		> svg:not(%headerBarIcon) {
			color: $main-color;
			filter: drop-shadow(0 0 5px);
			transition: filter .3s ease-in-out;
		}
		[mask] {
			-webkit-mask: url(https://clearvision.gitlab.io/icons/pin.svg);
			mask: url(https://clearvision.gitlab.io/icons/pin.svg);
			> %headerBarIcon {
				background: $main-color;
				opacity: 1;
			}
		}
		&:hover {
			> svg:not(%headerBarIcon) {
				filter: drop-shadow(0 0 5px) drop-shadow(0 0 10px);
			}
		}
	}
	%headerBarIconBadge {
		display: none;
	}

	// ICONS
	%headerBarIcon {
		&[name=Nova_Bell],
		&[name=Nova_BellOff],
		&[name=Nova_Pin],
		&[name=Nova_People],
		&[name=Nova_At],
		&[name=Nova_Help],
		&[name=Nova_ChatNew],
		&[name=Nova_CallJoin],
		&[name=Nova_CallVideo],
		&[name=Nova_UserAdd],
		&[name=Nova_Downloading] {
			> g,
			> path {
				display: none;
			}
		}
		&[name=Nova_Bell] {
			background: url(https://clearvision.gitlab.io/icons/notifications.svg) center/24px no-repeat;
		}
		&[name=Nova_BellOff] {
			background: url(https://clearvision.gitlab.io/icons/notifications_off.svg) center/24px no-repeat;
		}
		&[name=Nova_Pin] {
			background: url(https://clearvision.gitlab.io/icons/pin.svg) center/24px no-repeat;
		}
		&[name=Nova_People] {
			background: url(https://clearvision.gitlab.io/icons/people.svg) center/24px no-repeat;
		}
		&[name=Nova_At] {
			background: url(https://clearvision.gitlab.io/icons/mail.svg) center/24px no-repeat;
		}
		&[name=Nova_Help] {
			background: url(https://clearvision.gitlab.io/icons/help.svg) center/24px no-repeat;
		}
		&[name=Nova_ChatNew] {
			background: url(https://clearvision.gitlab.io/icons/group_add.svg) center/24px no-repeat;
		}
		&[name=Nova_CallJoin] {
			background: url(https://clearvision.gitlab.io/icons/call.svg) center/24px no-repeat;
		}
		&[name=Nova_CallVideo] {
			background: url(https://clearvision.gitlab.io/icons/videocam.svg) center/24px no-repeat;
		}
		&[name=Nova_UserAdd] {
			background: url(https://clearvision.gitlab.io/icons/person_add.svg) center/24px no-repeat;
		}
		&%headerBarIconUpdateAvailable {
			background: url(https://clearvision.gitlab.io/icons/sync.svg) center/24px no-repeat;
			animation: cv-update-spin 2s linear infinite;
		}
		&[name=Nova_Downloading] {
			position: relative;
			background: url(https://clearvision.gitlab.io/icons/cloud_download.svg) center/24px no-repeat,
				linear-gradient(to bottom, $main-color, $main-color) 50% 10px/10px 10px no-repeat;
			animation: cv-update-downloading 2.5s ease-in-out infinite;
		}
	}
	%headerBarIconWrapper {
		%headerBarIcon[name=Nova_Download] {
			color: $main-color;
			opacity: 1;
			filter: drop-shadow(0 0 5px);
			transition: filter .3s ease-in-out;
			%headerBarIconUpdateForeground {
				display: inline;
				fill: $main-color;
				d: path("M10,17L6.5,13.5L7.91,12.08L10,14.17L15.18,9L16.59,10.41M19.35,10.03C18.67,6.59 15.64,4 12,4C9.11,4 6.6,5.64 5.35,8.03C2.34,8.36 0,10.9 0,14A6,6 0 0,0 6,20H19A5,5 0 0,0 24,15C24,12.36 21.95,10.22 19.35,10.03Z");
			}
		}
		&:hover {
			%headerBarIcon[name=Nova_Download] {
				filter: drop-shadow(0 0 5px) drop-shadow(0 0 10px);
			}
		}
	}
	%headerBarLinkButton {
		opacity: .5;
		transition: all .15s ease-in-out;
		&:hover {
			opacity: 1;
		}
	}
	%headerBarLinkIcon {
		background: url(https://clearvision.gitlab.io/icons/share.svg) center/24px no-repeat;
		> g {
			display: none;
		}
	}
}

// SEARCH
%chatSearch %chatSearchBar,
%librarySearch,
%storeSearch {
	width: 140px;
	height: 28px;
	padding: 2px;
	background: hsla(0, 0%, 100%, .1);
	border-radius: 3px;
	transition: width .2s ease-in-out .1s;
}
%chatSearchFocused %chatSearchBar,
%chatSearchOpen %chatSearchBar,
%librarySearchFocused,
%storeSearchFocused {
	width: 240px;
}
%chatSearch {
	> %chatSearchRoot {
		color: #fff;
	}
	%chatSearchPlaceholder {
		color: hsla(0, 0%, 100%, .3);
	}
	%chatSearchFilter,
	%chatSearchAnswer {
		background: rgba(0, 0, 0, .3);
		color: #fff;
	}
	%chatSearchFilter {
		padding: 0 3px;
	}
	%chatSearchAnswer {
		margin: 0 2px 0 0;
		padding: 0 3px 0 0;
	}
}
%librarySearch {
	%librarySearchBar {
		background: transparent;
	}
	%librarySearchInput {
		color: #fff;
		&::placeholder {
			color: hsla(0, 0%, 100%, .3);
		}
	}
	%librarySearchIcon {
		color: hsla(0, 0%, 100%, .5);
		transition: all .15s ease-in-out;
	}
	%librarySearchIconLayout:hover {
		%librarySearchIconClear {
			color: #fff;
		}
	}
}
%storeSearch {
	%storeSearchBar {
		background: transparent;
	}
	%librarySearchInput {
		color: #fff;
		&::placeholder {
			color: hsla(0, 0%, 100%, .3);
		}
	}
	%storeSearchIcon {
		color: hsla(0, 0%, 100%, .5);
		transition: all .15s ease-in-out;
	}
	%storeSearchIconLayout:hover {
		%storeSearchIconClear {
			color: #fff;
		}
	}
}

// TOP PILL
%headerBar {
	%topPill {
		%topPillItem {
			font-size: 14px;
			&%topPillItemThemed {
				background: transparent !important;
				color: hsla(0, 0%, 100%, .5) !important;
				transition: all .3s ease-in-out;
				&:hover {
					background-color: rgba(0, 0, 0, .5) !important;
					color: hsla(0, 0%, 100%, .7) !important;
				}
				&%topPillItemSelected {
					background-color: $main-color !important;
					color: #fff !important;
				}
			}
		}
	}
}


// BREADCRUMBS
%breadcrumbs {
	margin-left: 2px;
	%breadcrumb {
		margin: 0 3px;
		transition: all .15s ease-in-out;
	}
	%breadcrumbArrow {
		transition: all .15s ease-in-out;
	}
	%breadcrumbWrapper {
		color: hsla(0, 0%, 100%, .3);
		&:hover {
			%breadcrumb {
				color: hsla(0, 0%, 100%, .7);
				text-decoration: none;
			}
			%breadcrumbArrow {
				&%directionRight {		
					color: hsla(0, 0%, 100%, .7);
					transform: rotateY(180deg) rotateZ(-90deg) translateY(3px);
				}
			}
		}
	}
}